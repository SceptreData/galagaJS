{"version":3,"sources":["js/draw.js","js/entity.js","js/main.js"],"names":["BG_COLOR","NUM_STARS","clearCanvas","canvas","ctx","width","height","clearRect","setStroke","setFill","rect","buildStars","starField","i","star","x","Math","floor","random","y","vy","ceil","push","updateStarField","stars","getContext","forEach","circle","color","strokeStyle","lineWidth","fillStyle","fill","beginPath","stroke","radius","arc","PI","closePath","image","src","w","h","drawImage","triangle","moveTo","lineTo","Draw","Entity","attrs","type","timeCreated","Date","now","position","Object","assign","prototype","render","boundRect","update","velocity","vx","screenLocked","setVerticalSpeed","v","setHorizontalSpeed","takeDamage","dmg","hp","isDead","collidesWith","other","otherX","otherY","oxerX","document","querySelector","FPS","lastTime","getTime","curTime","delta","entities","hero","registerInputEvents","gameLoop","window","requestAnimationFrame","e","filter","addEventListener","key","fireProjectile","k","ent","vel","x0","y0","originX","originY","p"],"mappings":";;AEAA;;AACA;;;ADDA;;ADAA,IAAMA,QAAQ,GAAG,SAAjB;AACA,IAAMC,SAAS,GAAG,EAAlB;;AAEA,SAASC,WAAT,CAAqBC,MAArB,EAA6BC,GAA7B,EAAkC;AAAA,MACxBC,KADwB,GACNF,MADM,CACxBE,KADwB;AAAA,AEAlC,IAAMF,EFCWG,IEDL,EFAsB,CEAnBsE,EFCazE,MADM,AEAX,CFCNG,AEDOuE,MFAU,OEAnB,CAAuB,aAAvB,CAAf;AFEEzE,AEDF,EFCEA,EEDIA,CFCD,CAACG,CEDG,GAAGJ,KFCV,CAAc,AEDE,CFChB,AEDiBsB,EFCA,CAAjB,EAAoBpB,KAApB,AEDU,CAAkB,CFCDC,GEDjB,CAAZ,EFCE;AAEAE,AEDF,EFCEA,EEDIsE,GAAG,GAAG,CFCD,CAAC1E,GAAD,EAAM,AEDE,EAAnB,OFCW,EAAiB,CAAjB,CAAT;AACAK,ACNF,ACMA,EFAEA,EEAEsE,KFAK,ACNA/B,CDMC5C,EEAE,CFAH,EAAMJ,ACNf,ACMe,CDNCG,GCMGiD,GDNnB,CDMS,AEAM,CFAb,ACNsBhD,ECME4E,CDN1B,EAA6B/B,ICMd,CDNf,CCMA,CDNoC;ADOlCvC,ACNA,ACKF,EFCEA,EEAAuE,EFAI,CAAC7E,ACNAD,GDMD,CEAG,CFAG,CAAN,ACNJ,CCMU,CFAG,AEDf,CFCM,ACNUA,EDMEE,ICNhB,CDMI,EAAmBC,MAAnB,CAAJ;AACD,ACNC,ACIF,IAEE4E,GDNK9E,ECMA,CDNL,ECMQ,CDNGA,ACIb,GDJE;AACA,ACOF,IAAI+E,GDPGjC,IAAL,CCOU,EDPE,CCOC,CDPb,CCOF;AFAA,ACNE,ACOF,IAAMtC,GDPCuC,EDMExC,IECM,GAAG,EDPhB,CDMF,CAAoBN,CCNC+C,IDMrB,ACNyB,CAACC,CDMC/C,ECNN,EAAnB,EDMF,EAAmC,GECNH,MAAM,CAACE,KAAlB,EAAyBF,MAAM,CAACG,MAAhC,CAAlB;AFAE,ACNA,ACQF,IAAM8E,EFFExE,CCNDP,CCQG,GAAG,CDRX,GDMe,ACNF,ACQE2C,EDRf,CDMkB,EAAlB,SEEW,CAAW7C,MAAX,EAAmBC,GAAnB,EAAwB;ADPnC,ACQAkD,EAAAA,KDRKhD,GCQG,EAAE,CDRV,ACQWH,GDRG,EAAd,CCQiB,CAACE,KAAP,GAAe,CAAhB,EAAmBF,MAAM,CAACG,MAAP,GAAgB,CAAhB,GAAoB,GAAvC,CADyB;AFDnC,ACLA,ACQAuD,EAAAA,KFHK,ACLAP,GCQG,CFHCzC,CAAC,AEGA,CAAC,CAAD,CFHG,ACLb,CDKA,AEGc,CAAJ,CFHMA,ACLA,ACMmB,CFDlB,ACLAV,GDKGF,GCLG,CAACI,KDKxB,ACLiB,EDKcQ,CAAC,ACLA,CAAhB,CDKhB,CCLmCV,CDKC,KCLK,CAACG,MAAP,GAAgB,CAAnC,CAAhB;ADME,AEGFyD,EAAAA,MFHMjD,IAAI,EEGE,CFHC,CEGC,IAHqB;AFC/BC,ACLJ,ACQAmC,EAAAA,IFHInC,ACLAkC,ACQA,CFHC,CEGC,CFHCjC,ECLP,EDKW,ACLA,CDKCC,KAAL,CAAWD,IAAI,CAACE,MAAL,MAAiBb,KAAK,GAAG,CAAzB,CAAX,CADM;AAETc,ACLFoC,ACGiC,CAAxB,CAAb,EDHIA,EDKEpC,CAAC,EAAEH,CCLC,CAACwC,EDKE,CAACvC,GCLV,CAAc,CDKT,CAAWD,ECLhB,EDKoB,ACLAiC,CDKC/B,ICLrB,EDKgB,MAAiBZ,MAAM,GAAG,CAA1B,CAAX,CAFM;AAGTc,ACLH,ACQH+D,MFHM/D,EAAE,AEGA,CAACE,CFHCN,GEGV,CFHc,AEGAoE,CFHC/D,GEGf,CFHU,CAAUL,IAAI,CAACE,MAAL,KAAgB,CAA1B;AAHK,ACDd,ACSDmE,KFRI,cEQe;AFHfzE,IAAAA,SAAS,CAACU,IAAV,CAAeR,IAAf;AACD,ACLHkC,ACSA,MDTM,CAACS,ECSE6B,ODTT,CAAiB5B,ACSjB,GAAoB,GDTpB,GAA0B,YAA2B;AAAA,ACUnD,MDViCC,SAAkB,uEAAN,IAAM;ADMnD,AEKA4B,EAAAA,MAAM,CFLC3E,AEKA4E,SFLP,YEKA,CAA6BF,QAA7B;AFJD,ACPoD,ACanDL,EAAAA,OAAO,GAAG,IAAI7B,IAAJ,GAAW4B,OAAX,EAAV,MDZa,KAAK1B,QADiC;AAAA,ACcnD4B,EAAAA,IDbKnE,CAD8C,ACc9C,GAAGkE,OAAO,GAAGF,QAAlB;AFLF,ACTqD,MAC3C5D,CAD2C,EDS5CI,eAAT,CAAyBpB,MAAzB,EAAiCqB,KAAjC,EAAwC;AACtC,AEMA,MFNIpB,AEMA8E,GFNG,EEME,CFNC/E,EEME2E,GAAZ,CFNgB,CAACrD,AEMA,UFNP,CAAkB,IAAlB,CAAV;AACAD,ACTA,ACeE,EFNFA,ICTImC,CDSC,CAACjC,OAAN,ACTa,CDSC,GCTG,KAAKwB,EDSRpC,CEMAX,CDfG,EDSC,EAAI,CCTS,ACe7B,EAAoBC,GAApB,ODfF,EAA6C;ADU3CU,ACTAiC,ACeAa,IFNA9C,AEMA8C,IFNI,CAACzC,CAAL,AEMM,GFNG,CAACL,CCTLN,GDSS,CAACW,CAAL,GAASL,CCTnB,CAAe,EDSQ,CAACM,EAAd,ACTUhB,GDSSD,ACT7B,EAAyB,IDSU,CAACG,CCTpC,KDSS,IAAqCH,MAAM,CAACG,MAArD;AACAG,AEMAiD,IFNAjD,AEMAiD,MAAM,CFNC,CAACtD,GAAD,EAAM,MAAN,CAAP;AACAuB,ACVAoB,ACgBD,IFNCpB,MAAM,CAACvB,GAAD,CCVDM,CDUOI,GCVZ,CDUgB,ACVN,CDUOC,CAAX,EAAcD,CCVLV,GDUS,ACVxB,CDUyBe,CAAnB,ACVcJ,CAApB,CDU4B,CAAtB,ACViBI,CDUvB,ACVA,EAA0B,KAAKd,KAA/B,EAAsC,KAAKC,MAA3C,EAAmD,KAAnD;ADWD,ACVA,ACgBF,GFVC;AAKD;ACTC,ACeFgF,MDfM,ECeE,GDfG/C,KAAT,EAAgB;ADWlB,ACVIQ,SDUKvC,MCVA+B,GDUT,CAAmBnC,CCVf,CAAW,CDUf,EAAwBwB,ECVJW,GDUpB,EAA0C,ACVtC,EAAuBxB,CAAvB,EAA0BI,CAA1B,EAA6B,KAAKd,KAAlC,EAAyC,KAAKC,MAA9C;ADUsC,ACTvC,ACeH,MFN+BD,GEMtBuD,EFNiC,IEM1C,GAAkB,gEFNqB,CAAG;AACxCxD,AEMA,EFNAA,GAAG,CAACyB,WAAJ,GAAkBD,KAAlB,IEMgBzB,MAAhB,EAAwBS,SAAxB,EADgB,CAEhB;AFNAR,ACTA,EDSAA,GAAG,CAAC0B,ACTA,KAAKoB,IDST,ACTI,GDSY7C,ECTE,GDSlB,GCTA,EAA0B;ADU3B,ACTG0C,ACeFoC,EAAAA,QAAQ,CAACzD,IDfFlB,GCeP,CAAiB,KDff,CAAe,ICeAiF,CDfKrF,ACeJ,GDfhB,EAAyB,MAAzB;ACegB,WAAIqF,CAAC,CAAC7B,MAAF,EAAJ;AFJpB,ACVIb,ACcgB,GAAlB,EAHgB,CAKhB,GFNOtC,MCVAmC,CDUT,CAAiBxC,GAAjB,EAAsBwB,CCVlB,CAAc,GDUlB,EAA6B,ACVNxB,GAAnB,EAAwBW,CAAxB,EAA2BI,CAA3B,EAA8B,KAAKd,KAAnC,EAA0C,KAAKC,MAA/C;ADWFF,ACVC,EDUDA,CCbA,EDaG,CAAC2B,GCVG,IAAI,EDUX,GAAgBH,ACVAsB,IAAL,CDUX,ICVyB,OAAlB,EAA2B,CAChC;ADUH,ACTE,ACcDiC,EAAAA,CDhBO,MAEA,CCcC,GDdG,ACcAA,KDdKjC,GCcG,CDdR,ACcSwC,KDdK,CCcd,CAAgB,UDdpB,ACcoBD,CAAC,CDdW;AACrC1C,ACa0B,WAAI,CAAC0C,CAAC,CAACnB,CDb5B9D,KCaqB,IDb1B,CAAe,KAAKJ,GAApB,EAAyB,QAAzB;ADUJ,AEG8B,GAAjB,CAAX,KFHOM,IAAT,CAAcN,GAAd,EAAmBW,CAAnB,EAAsBI,CAAtB,EAAyBd,KAAzB,EAAgCC,MAAhC,EAAqD;AAAA,ACTjDyC,ACaH,MFJuCf,IAAa,KCT5CvB,OAAL,CAAa,KAAKL,GAAlB,EAAuB,QAAvB,wCDS2C,IAAM;AACnDA,EAAAA,GAAG,CAAC6B,SAAJ;AACA7B,ACVE2C,ACcJ,EFJE3C,GAAG,CAACM,GEIGgD,CFJP,CAAS3C,CAAT,EAAYI,CAAZ,ACVOQ,ACcT,EFJiBtB,CEIC,GDdd,CDUF,ACVc,EDUQC,GCVHF,GDUnB,ACVE,EAAsB,KAAKW,CAA3B,EAA8B,KAAKI,CAAnC,EAAsC,EAAtC;ACeF;AFHA,ACXE4B,ACeFoC,EAAAA,IFJInD,IAAJ,AEIQ,CAACN,CFJC,GCXHhB,GCeP,CDfE,ACee,CDfL,KAAKN,GAAf,CCeeqF,CDfK1E,ACeJ,CDfhB,EAAuBI,CAAvB,EAA0B,KAAKd,KAA/B,EAAsC,KAAKC,MAA3C,EAAmD,IAAnD;ADYAF,ACXD,ACciB,IFHhBA,GAAG,CAAC4B,GEGgByD,CFHpB,AEGqB,CAAC/B,MAAF,CAAS,KAAT,CAAJ;AFFjB,ACXF,ACamB,CDnCpB,ECmCE;AACD;AFFCtD,ACVF4C,EDUE5C,GAAG,CAAC8B,ACVA,CAACuB,KDUL,ICVF,CAAiBG,MAAjB,GAA0B,YAAW;ADWpC,ACVC,ACaF,MDbM,GCaGyB,EDbExB,QAAT,EAAmB,OCarB,GAA+B;ADbV,ACcnBe,EAAAA,QAAQ,CAACe,gBAAT,CAA0B,SAA1B,EAAqC,EDbtB,KAAKrC,GCaiBmC,CAAC,EAAI,EDdvB;ADYrB,ACZqB,ACejB,QDdK1E,ACcD0E,CFHC9D,ACZY,ACeZ,CAACiE,GAAF,EFHR,CAAgBxF,CEGC,EFHjB,CEGQ,CFHaW,CAArB,EAAwBI,AEGAsE,CFHxB,AEGyB,CAACG,CFHCzD,EEGH,IFHxB,AEGiC,EFHe,OEG5C,EAAwC;AFHI,ACZ3B,ACgBfiD,MFJ6BpD,AEI7BoD,EDfMjE,CADS,CDY2B,AEItC,CAAC6C,gBAAL,CAAsB,CAAC,CAAvB,mDFJoC,IAAM;AAC9C5D,AEIG,EFJHA,GAAG,AEED,CFFE6B,KEIK,IFJT,AEIawD,CAAC,CAACG,GAAF,IAAS,GAAT,IAAgBH,CAAC,CAACG,GAAF,IAAS,WAA7B,EAA0C;AFHnDxF,ACdmB,ACkBfgF,EFJJhF,GAAG,CAACgC,AEIAgD,GFJJ,CAAQrE,AEIA,CFJR,AEISiD,EFJE7C,CAAX,EAAcgB,MAAd,EAAsB,CAAtB,EAAyB,AEIrB,CAAsB,CAAtB,EFJyBnB,IAAI,CAACqB,EAAlC,ECZiB,KAAKwB,QAFH;AAAA,ACmBhB,KAFM,GDfFC,EAFY,CCmBV,IAAI2B,CAAC,CAACG,GAAF,IAAS,GAAT,IAAgBH,CAAC,CAACG,GAAF,IAAS,YAA7B,EAA2C;AFJpD,ACfmB,ACoBfR,MFLApD,AEKAoD,EDlBOhE,EDaX,ACfmB,ACoBX,CAAC8C,CFLC,iBEKN,CAAwB,CAAxB;AFJF9D,AEKC,IFLDA,CEGO,EFHJ,CAAC4B,GEKG,CFLP,GEKWyD,CAAC,CAACG,GAAF,IAAS,GAAT,IAAgBH,CAAC,CAACG,GAAF,IAAS,WAA7B,EAA0C;AFJlD,ACbC,ACkBER,MAAAA,EDlBE,ECkBE,CAAClB,EDlBEhB,IAAL,KAAc,OCkBhB,CAAwB,CAAC,CAAzB,EDlBF,EAAgC,CAC/B,CALgB,CAOjB;ACgBC,KAFM,MAEA,IAAIuC,CAAC,CAACG,GAAF,IAAS,GAAb,EAAkB;AFL3BxF,AEMIyF,EFNJzF,GAAG,CAAC8B,AEMA2D,MFNJ,QEMkB,CAACT,IAAD,EAAO,CAAC,CAAD,EAAI,CAAC,CAAL,CAAP,CAAd;AFLJhF,ACXEW,ACiBC,EFNHX,ECXEW,CDWC,ACXA,CDWCuB,GCXGwB,EAAL,IDWF;AACD,ACXG3C,ACiBD,GAZD,CDLEA,CAAC,IAAIC,EAAL,CATiB,CAWjB;ACiBFwD,EAAAA,QAAQ,CAACe,gBAAT,CAA0B,OAA1B,EAAmC,UAAAF,CAAC,EAAI;AFN1C,ACVI,ACiBA,QDjBI,ACiBEK,CFPDvD,AEOE,GAAGkD,CDjBD1B,ACiBE,CFPf,AEOgB6B,CFPDxF,EEOX,CFPJ,EAAoBoC,GAApB,EAAyBzB,ACVrB,CDUJ,CCV2B,CDUCI,CAA5B,EAA+BsB,CAA/B,EAAkCC,CAAlC,EAAqC;AACnCtC,ACVI,EDUJA,GAAG,CAACuC,ICVI5B,CAAC,GAAG,CDUZ,CAAcyB,GAAd,ACViBnC,EDUEU,CAAnB,EAAsBI,ACVd,CDUR,EAAyBsB,CAAzB,ACV0B,EDUEC,CAA5B,ECV+BvC,MAAL,CAAYE,KAAlC,EAAyC;ADW9C,ACVOU,ACgBJ,QDhBIA,ACgBA+E,CDhBC,ACgBA,GDhBG,CCgBC,GAAL,CDhBS3F,GCgBG2F,CAAC,EDhBT,CAAYzF,CCgBC,IDhBb,GAAoB,ECgBxB,GDhB6BA,CCgBCyF,CAAC,GDhB3B,CCgB+B,EDhBE,CAArC,ACgBA,IAA0CA,CAAC,IAAI,WAAnD,EAAgE;ADf7D,ACgBDV,MAAAA,IAAI,CAACpB,gBAAL,CAAsB,CAAtB;AFLN,AEMK,KAFD,IFJKpB,EEME,IACLkD,CAAC,CFPP,CAAkB1F,EEOP,CFPX,EAAuBW,AEOjB,CFPN,EAA0BI,CAA1B,AEQMsE,CAAC,CFRsBhD,AEQrBmD,CFRR,EAAgClD,AEQ1B,CFRN,EAAmC,CEQpB,YADT,IAEAoD,CAAC,IAAI,GAFL,IAGAA,CAAC,IAAI,WAJA,EAKL;AFVJ1F,ACVI,ACqBAgF,EFXJhF,GAAG,CAAC6B,AEWAmD,IDrBIrE,ACqBA,CDrBC,ACqBAmD,IFXT,ACVa,CAAT,EAAYnD,CAAC,GAAG,CAAJ,MCqBZ,CAAwB,CAAxB;AFVJX,AEWG,EFXHA,GAAG,CAACyC,MAAJ,CAAW9B,CAAX,EAAcI,CAAC,GAAGuB,CAAlB;AACAtC,ACVI,ACqBH,EFXDA,CEDA,EFCG,CAAC0C,ICVI3B,CAAC,CDUT,CAAWJ,CAAC,ACVA,GDUG0B,CAAC,CCVCnC,EDUE,CAAnB,EAAsBa,CAAtB,ACVQ,IAAmB,KAAKhB,MAAL,CAAYG,MAAnC,EAA2C;ADW/CF,ACVMe,ACqBP,EFXCf,GAAG,CAAC0C,ECVE3B,CAAC,GDUP,ACVU,CDUCJ,CAAC,GAAG0B,ACVAtC,CDUf,EAAkBgB,CAAC,ECVT,CDUYuB,ACVApC,CDUtB,KCVU,GAAqB,KAAKA,MAA9B;ADWNF,ACVK,EDULA,GAAG,CAACkC,SAAJ;AACAlC,AEWF,EFXEA,GAAG,CAAC4B,GEWG6D,CFXP,aEWF,CAAwBE,GAAxB,EAA6BC,GAA7B,EAAkC;AFVjC,ACVK,ACoB4B,UDpBxB7E,CAAC,IAAI,CAAT,EAAYA,CAAC,GAAG,CAAJ,cCqBD4E,GAAG,CAACzC,QADa;ADnB7B,ACmB6B,MAC3B2C,EAD2B;AFRlC,AEQkC,IFR5BlD,EESKmD,EFTD,AEQwB,GFRrB;AAAE1F,ACTX,EDSWA,OCTN8C,EDSe,EAAT9C,ICTX,GAAgB,CAACO,CDSR,ACTO,EAAII,CAAJ,CAAhB;ADSsBV,ACRtB,ACkBF,EFVwBA,IEUpB0F,GFV2B,ACRxBtC,EDQiBpD,EEUb,GAAGwF,CDlBZ,CDQS,AEUK,EDlBE,CAACnC,ACkBAiC,EDlBD,CCkBI,CDlBC3E,ACkBAf,EDlBL,CAAhB,ECkBiB,GAAY,CAA/B;AFViCK,ACPhC,ACkBD,EFXiCA,IAAI,AEWjC0F,EFX6B1F,IAAtB,CEWA,GAAGwF,EAAE,GAAGH,GAAG,CAACzF,MAAJ,GAAa,CAAhC;AFXuCqB,ACNxC,ACmBC,CDjDF,CDoCyCA,IEanC0E,CAAC,CFbwC,EAAN1E,AEa/B,IAAIqB,EFbD,YEaH,CAAW7C,MAAX,EAAmBC,GAAnB,EAAwB;AFbeF,AEc7CoD,EFd6CpD,EEc7CoD,QAAQ,CFdgD,CEc9C,CFdmCpD,AEclCiG,OAAD,EAAUC,EFdX,KEcC,CADoB;AFb4B7D,ACJ9DS,ACmBI3C,EFf0DkC,EEe1DlC,EDnBE,CDI6D,ACJ5DoD,EDIuDlB,AEerD,EAAE,CAFuB,EFbrB,ECJb,CAAiByB,gBAAjB,GAAoC,UAASC,CAAT,EAAY;ADIqBrB,ACHnE,ACmBEtC,EFhBiEsC,EEgBjEtC,GDnBGuD,GDGsE,AEgBnE,EFhB2DjB,AEgBzD,CAHsB,EDhBhC,CAAc,CAAd,IAAmBqB,CAAnB;ADGW,ACFZ,ACmBGJ,CFjBJ,ACJA,GCqBIA,QAAQ,EAAEmC,GAJoB;AAK9B9C,IAAAA,IAAI,EAAE;ADlBVF,ACakC,GAAxB,CAAR,EDbI,CAACS,SAAP,CAAiBS,kBAAjB,GAAsC,UAASD,CAAT,EAAY;AAChD,ACoBAkB,EAAAA,KDpBKtB,GCoBG,CAACvC,IDpBT,ACoBA,CDpBc,ACoBA+E,CDpBd,ACoBA,IDpBmBpC,CAAnB;AACD,ACoBA,CDtBD;;AAIAjB,MAAM,CAACS,SAAP,CAAiBU,UAAjB,GAA8B,UAASC,GAAT,EAAc;AAC1C,MAAI,KAAKC,EAAT,EAAa;AACX,SAAKA,EAAL,GAAU,KAAKA,EAAL,GAAUD,GAApB;AACD;;AACD,MAAI,KAAKC,EAAL,IAAW,CAAf,EAAkB;AAChB,SAAKC,MAAL,GAAc,IAAd;AACD;AACF,CAPD;;AASAtB,MAAM,CAACS,SAAP,CAAiBc,YAAjB,GAAgC,UAASC,KAAT,EAAgB;AAAA,uCACjC,KAAKlB,QAD4B;AAAA,MACzCvC,CADyC;AAAA,MACtCI,CADsC;;AAAA,uCAEvBqD,KAAK,CAAClB,QAFiB;AAAA,MAEzCmB,MAFyC;AAAA,MAEjCC,MAFiC;;AAI9C,SACE3D,CAAC,GAAG4D,KAAK,GAAGH,KAAK,CAACnE,KAAlB,IACAU,CAAC,GAAG,KAAKV,KAAT,GAAiBoE,MADjB,IAEAtD,CAAC,GAAGuD,MAAM,GAAGF,KAAK,CAAClE,MAFnB,IAGAa,CAAC,GAAG,KAAKb,MAAT,GAAkBoE,MAJpB;AAMD,CAVD","file":"main.fb6bbcaf.js","sourceRoot":"..","sourcesContent":["const BG_COLOR = '#333333';\nconst NUM_STARS = 20;\n\nfunction clearCanvas(canvas, ctx) {\n  const { width, height } = canvas;\n  ctx.clearRect(0, 0, width, height);\n\n  setStroke(ctx, '#111111', 0);\n  setFill(ctx, BG_COLOR);\n  rect(ctx, 0, 0, width, height);\n}\n\nfunction buildStars(width, height) {\n  const starField = [];\n  for (let i = 0; i < NUM_STARS; i++) {\n    let star = {\n      x: Math.floor(Math.random() * (width - 1)),\n      y: Math.floor(Math.random() * (height - 1)),\n      vy: Math.ceil(Math.random() * 5)\n    };\n    starField.push(star);\n  }\n  return starField;\n}\n\nfunction updateStarField(canvas, stars) {\n  let ctx = canvas.getContext('2d');\n  stars.forEach(star => {\n    star.y = (star.y + star.vy + canvas.height) % canvas.height;\n    setFill(ctx, '#eee');\n    circle(ctx, star.x, star.y, 3);\n  });\n}\n\nfunction setStroke(ctx, color, width = 1) {\n  ctx.strokeStyle = color;\n  ctx.lineWidth = width;\n}\n\nfunction setFill(ctx, color) {\n  ctx.fillStyle = color;\n}\n\nfunction rect(ctx, x, y, width, height, fill = true) {\n  ctx.beginPath();\n  ctx.rect(x, y, width, height);\n\n  if (fill) {\n    ctx.fill();\n  }\n  ctx.stroke();\n}\n\nfunction circle(ctx, x, y, radius, fill = true) {\n  ctx.beginPath();\n  ctx.arc(x, y, radius, 0, 2 * Math.PI);\n  if (fill) {\n    ctx.fill();\n  }\n  ctx.stroke();\n  ctx.closePath;\n}\n\nfunction image(ctx, src, x, y, w, h) {\n  ctx.drawImage(src, x, y, w, h);\n}\n\nfunction triangle(ctx, x, y, w, h) {\n  ctx.beginPath();\n  ctx.moveTo(x, y + h);\n  ctx.lineTo(x + w / 2, y);\n  ctx.lineTo(x + w, y + h);\n  ctx.closePath();\n  ctx.fill();\n}\n\nconst Draw = { setStroke, setFill, rect, circle, clearCanvas, image, triangle };\n\nexport { Draw, clearCanvas, buildStars, updateStarField };\n","import { Draw } from './draw.js';\n\nfunction Entity(canvas, ctx, attrs) {\n  this.canvas = canvas;\n  this.ctx = ctx;\n  this.type = '';\n  this.timeCreated = Date.now();\n  this.width = 50;\n  this.height = 50;\n  this.position = [canvas.width / 2, canvas.height / 2];\n\n  if (attrs) {\n    Object.assign(this, attrs);\n  }\n}\n\nEntity.prototype.render = function(boundRect = true) {\n  let [x, y] = this.position;\n  if (boundRect || this.type === 'projectile') {\n    Draw.setStroke(this.ctx, '#eee');\n    Draw.rect(this.ctx, x, y, this.width, this.height, false);\n  }\n\n  if (this.image) {\n    Draw.image(this.image, x, y, this.width, this.height);\n  }\n\n  if (this.type === 'hero') {\n    Draw.setStroke(this.ctx, '#eee');\n    Draw.triangle(this.ctx, x, y, this.width, this.height);\n  } else if (this.type === 'enemy') {\n    // drawEnemyImage\n  } else if (this.type === 'projectile') {\n    Draw.setStroke(this.ctx, 'tomato');\n    Draw.setFill(this.ctx, 'tomato');\n    Draw.circle(this.ctx, this.x, this.y, 10);\n    Draw.rect(this.ctx, x, y, this.width, this.height, true);\n  }\n};\n\nEntity.prototype.update = function() {\n  if (this.velocity) {\n    let [x, y] = this.position;\n    let [vx, vy] = this.velocity;\n\n    if (this.type === 'projectile') {\n    }\n\n    // Clamp speeds here.\n    x += vx;\n    y += vy;\n\n    // Make sure our ship cant go out of bounds\n    if (this.screenLocked) {\n      if (x + this.width >= this.canvas.width) {\n        x = this.canvas.width - this.width - 1;\n      }\n\n      if (x <= 0) x = 1;\n\n      if (y + this.height >= this.canvas.height) {\n        y = this.canvas.height - this.height;\n      }\n\n      if (y <= 0) y = 1;\n    }\n\n    this.position = [x, y];\n    this.velocity = [vx, vy];\n  }\n};\n\nEntity.prototype.setVerticalSpeed = function(v) {\n  this.velocity[1] = v;\n};\n\nEntity.prototype.setHorizontalSpeed = function(v) {\n  this.velocity[0] = v;\n};\n\nEntity.prototype.takeDamage = function(dmg) {\n  if (this.hp) {\n    this.hp = this.hp - dmg;\n  }\n  if (this.hp <= 0) {\n    this.isDead = true;\n  }\n};\n\nEntity.prototype.collidesWith = function(other) {\n  let [x, y] = this.position;\n  let [otherX, otherY] = other.position;\n\n  return (\n    x < oxerX + other.width &&\n    x + this.width > otherX &&\n    y < otherY + other.height &&\n    y + this.height > otherY\n  );\n};\n\nexport { Entity };\n","import { Draw, clearCanvas, buildStars, updateStarField } from './draw.js';\nimport { Entity } from './entity';\n\nconst canvas = document.querySelector('#gameCanvas');\nconst ctx = canvas.getContext('2d');\n\nconst FPS = 1000 / 60;\n\nlet lastTime = new Date().getTime(),\n  curTime = 0,\n  delta = 0;\n\nlet entities = [];\nconst starField = buildStars(canvas.width, canvas.height);\n\nconst hero = new Entity(canvas, ctx, {\n  position: [canvas.width / 2, canvas.height / 2 + 150],\n  velocity: [0, 0],\n  screenLocked: true,\n  type: 'hero'\n});\nentities.push(hero);\n\nregisterInputEvents();\n\nfunction gameLoop() {\n  // Fancy browser animation magic\n  window.requestAnimationFrame(gameLoop);\n\n  curTime = new Date().getTime();\n  delta = curTime - lastTime;\n\n  if (delta > FPS) {\n    clearCanvas(canvas, ctx);\n    update();\n    render();\n  }\n}\ngameLoop();\n\nfunction update() {\n  updateStarField(canvas, starField);\n  // hero.update();\n  entities.forEach(e => e.update());\n\n  // Clear the bodies\n  entities = entities.filter(e => !e.isDead);\n}\n\nfunction render() {\n  // hero.render(false);\n  entities.forEach(e => e.render(false));\n}\n\nfunction registerInputEvents() {\n  document.addEventListener('keydown', e => {\n    if (e.key == 'w' || e.key == 'ArrowUp') {\n      hero.setVerticalSpeed(-5);\n    } else if (e.key == 's' || e.key == 'ArrowDown') {\n      hero.setVerticalSpeed(5);\n    } else if (e.key == 'd' || e.key == 'ArrowRight') {\n      hero.setHorizontalSpeed(5);\n    } else if (e.key == 'a' || e.key == 'ArrowLeft') {\n      hero.setHorizontalSpeed(-5);\n    } else if (e.key == ' ') {\n      fireProjectile(hero, [0, -5]);\n    }\n  });\n\n  document.addEventListener('keyup', e => {\n    const k = e.key;\n    if (k == 'w' || k == 'ArrowUp' || k == 's' || k == 'ArrowDown') {\n      hero.setVerticalSpeed(0);\n    } else if (\n      k == 'd' ||\n      e.key == 'ArrowRight' ||\n      k == 'a' ||\n      k == 'ArrowLeft'\n    ) {\n      hero.setHorizontalSpeed(0);\n    }\n  });\n}\n\nfunction fireProjectile(ent, vel) {\n  let [x0, y0] = ent.position;\n  let originX = x0 + ent.width / 2;\n  let originY = y0 + ent.height / 2;\n\n  let p = new Entity(canvas, ctx, {\n    position: [originX, originY],\n    width: 3,\n    height: 3,\n    velocity: vel,\n    type: 'projectile'\n  });\n\n  entities.push(p);\n}\n"]}